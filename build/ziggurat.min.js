(function(){var e,t,n,s;if(typeof HTML=="undefined"||HTML===null)throw new Error("can't find HTML. did you forget to import imperative-html?");e={},e.query=function(e){var t=document.querySelectorAll(e);return t.length===1?t[0]:t},e.queryone=function(e){return document.querySelector(e)},e.queryall=function(e){return document.querySelectorAll(e)},e.deepfind=function(e,t){var n,s,o,i,a;t=t.trim(),o=function(){var e,n,o=t.split("."),i=[];for(e=0,n=o.length;e<n;e++)s=o[e],s!==""&&i.push(s);return i}();for(n=0,a=o.length;n<a;n++)if(i=o[n],e=e[i],e==null)throw new Error(`'${t}' not in data '${e}'`);return e},e._INIT_LIST=[],e.init=function(){var t,n,s,o=e._INIT_LIST,i=[];for(t=0,s=o.length;t<s;t++)n=o[t],i.push(n());return i},e.formdata=function(e){var t={};return new FormData(e).forEach(function(n,s){return Object.defineProperty(t,s,{get:function(){return e[s].value},set:function(t){return e[s].value=t}})}),t},e._INIT_LIST.push(function(){var t,n,s,o,i=e.queryall("form[zg-submit]"),a=[];for(n=0,o=i.length;n<o;n++)t=i[n],s=t.getAttribute("zg-submit"),a.push(t.onsubmit=function(n){var o;try{window[s](e.formdata(t))}catch(e){o=e,console.error(o)}return n.preventDefault,!1});return a}),e.mirror=class{constructor(t,n,s,o){this.name=t,Object.defineProperty(this,"v",{get:function(){return this._value},set:function(t){var n,i,a,r,c,l,d,u;this._value=t,a=e.queryall(`zg-bind[name=${this.name}]`);for(n=0,l=a.length;n<l;n++)c=a[n],c.innerText=this._value;r=[];for(i=0,d=s.length;i<d;i++)u=s[i],r.push(u(this._value,this.name,o));return r}}),this.v=n}},e.mirror_to_localstorage=function(e,t){return localStorage[t]=e},e.cookies=new Proxy({},{get:function(e,t){var n,s,i,o=function(){var e,t,s=document.cookie.split("; "),o=[];for(e=0,t=s.length;e<t;e++)n=s[e],o.push(n.split("="));return o}();for(s=0,i=o.length;s<i;s++)if(n=o[s],n[0]===t)return n[1]},set:function(e,t,n){var s,o,i;return typeof n=="object"?(o=`${t}=${n.value}; `,o+=function(){var e;if(s!=="value"){e=[];for(s in n)i=n[s],e.push(i!=null?`${s} = ${i}`:`${s}`);return e}}().join("; ")):o=`${t}=${n}`,document.cookie=o}}),e.load_json_cookie=function(t){var n,s=e.cookies[t];try{return JSON.parse(s)}catch(e){return n=e,null}},e.mirror_to_cookie=function(t,n,s){return e.cookies[n]={value:JSON.stringify(t),...s}},Number.prototype.nanos=function(){return this.micros()/1e3},Number.prototype.micros=function(){return this.millis()/1e3},Number.prototype.millis=function(){return this.seconds()/1e3},Number.prototype.seconds=function(){return this},Number.prototype.minutes=function(){return this.seconds()*60},Number.prototype.hours=function(){return this.minutes()*60},Number.prototype.days=function(){return this.hours()*24},Number.prototype.months=function(){return this.days()*30.43684914},Number.prototype.years=function(){return this.months()*12},Number.prototype.ago=function(){return new Date(Date.now()-this*1e3)},Number.prototype.fromnow=function(){return new Date(Date.now()+this*1e3)},s=function(e){return function(){return this(Math[e])}},function(){var e,s,o,i;(function(){}),o=Object.getOwnPropertyNames(Math),s=[];for(e=0,i=o.length;e<i;e++)t=o[e],n=Math[t],n.length===1&&typeof n=="function"?s.push(eval(`Number.prototype.${t} = function() {return Math.${t}(this)}`)):s.push(void 0);return s}()(),e.stream={},e.HttpException=class HttpException extends Error{constructor(e){super(`Recieved code ${e} from server`),this.status=e}},e.stream.text=async function*(t,n){if(s=await fetch(t,n),!s.ok)throw new e.HttpException(s.statusCode);for(var s,o,i,r=s.body.getReader(),a=new TextDecoder;!0;)if(i=await r.read(),o=a.decode(i.value),o.length>0&&(yield o),i.done)return},e.stream.lines=async function*(t,n){var s,o,i,r,c,l,a="",d=e.stream.text(t,n);for await(c of d)a+=c,s=a.split(`
`),s.length>1&&(yield s[0],s=s.slice(1),a=s.join(`
`));i=[];for(o=0,l=s.length;o<l;o++)r=s[o],r.length>0?i.push(yield r):i.push(void 0);return i},e.stream.jsonl=async function*(t,n){var s,i=e.stream.lines(t,n),o=[];for await(s of i)try{o.push(yield JSON.parse(s))}catch{}return o},e.create=function(t,n){var s,o=e.queryone("zg-template#"+t);if(o==null)throw new TypeError("no such template with name "+t);return s=function(t,n){var o,i,a,l=t.cloneNode(!0),r=[],c=l.childNodes;for(i=0,a=c.length;i<a;i++){switch(o=c[i],o.nodeName.toLowerCase()){case"zg-var":o=document.createTextNode(e.deepfind(n,o.innerHTML))}o.children!=null&&o.replaceChildren(...s(o,n)),r.push(o)}return r},HTML.div(s(o,n))}}).call(this)